!function(){"use strict";var e=window.elementorV2.editor,t=window.elementorV2.editorEditingPanel,r=window.elementorV2.editorPanels,a=window.elementorV2.editorStylesRepository,o=window.elementorV2.store,n=window.React,l=window.elementorV2.icons,s=window.elementorV2.ui,i=window.wp.i18n,c=window.elementorV2.editorUi,d=window.elementorV2.editorProps,m=window.elementorV2.editorStyles,p=window.elementorV2.utils,u=window.elementorV2.http,w=(0,p.createError)({code:"global_class_not_found",message:"Global class not found."}),_="globalClasses",g=(0,o.__createSlice)({name:_,initialState:{items:{},order:[]},reducers:{init(e,{payload:t}){e.items=t.items,e.order=t.order},add(e,{payload:t}){e.items[t.style.id]=t.style,e.order=t.order},update(e,{payload:t}){e.items[t.style.id]=t.style,e.order=t.order},updateProps(e,{payload:t}){const r=e.items[t.id];if(!r)throw new w({context:{styleId:t.id}});const a=(0,m.getVariantByMeta)(r,t.meta);a?a.props=(0,d.mergeProps)(a.props,t.props):r.variants.push({meta:t.meta,props:t.props})}}}),y=(0,o.__createSelector)((e=>e[_].items),(e=>e[_].order),((e,t)=>t.map((t=>e[t])))),S=(e,t)=>e[_].items[t]??null,E=()=>{const e=(0,o.__useSelector)(y);return n.createElement(s.Stack,null,n.createElement(s.List,{role:"list"},e?.map((({id:e,label:t})=>n.createElement(s.Stack,{key:e,direction:"row",alignItems:"center",gap:1,role:"listitem"},n.createElement(s.ListItemButton,{sx:{borderRadius:1}},n.createElement(c.EllipsisWithTooltip,{title:t,as:s.Typography,variant:"caption"})))))))},{panel:h,usePanelActions:b,usePanelStatus:f}=(0,r.__createPanel)({id:"class-manager-panel",component:function(){return n.createElement(s.ErrorBoundary,{fallback:n.createElement(P,null)},n.createElement(r.Panel,null,n.createElement(r.PanelHeader,null,n.createElement(s.Stack,{p:1,width:"100%",direction:"row",alignItems:"center"},n.createElement(r.PanelHeaderTitle,{sx:{display:"flex",alignItems:"center",gap:.5}},n.createElement(l.ColorSwatchIcon,{fontSize:"inherit",sx:{transform:"rotate(90deg)"}}),(0,i.__)("CSS Class manager")),n.createElement(C,{sx:{marginLeft:"auto"}}))),n.createElement(r.PanelBody,{px:2},n.createElement(E,null))))}}),C=e=>{const{close:t}=b();return n.createElement(s.IconButton,{size:"small",color:"secondary",onClick:t,...e},n.createElement(l.XIcon,{fontSize:"small"}))},P=()=>n.createElement(s.Box,{role:"alert",sx:{minHeight:"100%",p:2}},n.createElement(s.Alert,{severity:"error",sx:{mb:2,maxWidth:400,textAlign:"center"}},n.createElement("strong",null,(0,i.__)("Something went wrong","elementor")))),V="/global-classes";var I={key:"global-classes",priority:30,actions:{get:()=>y((0,o.__getState)()),getById:e=>S((0,o.__getState)(),e),create:async e=>{const t=await(async e=>(0,u.httpService)().post(V,e))(e),{data:r,meta:a}=t.data;return(0,o.__dispatch)(g.actions.add({style:r,order:a.order})),r},update:async e=>{const t={...S((0,o.__getState)(),e.id),...e},r=await(async(e,t)=>(0,u.httpService)().put(`${V}/${e}`,t))(e.id,t),{data:a,meta:n}=r.data;return(0,o.__dispatch)(g.actions.update({style:a,order:n.order})),a},updateProps:e=>{(0,o.__dispatch)(g.actions.updateProps({id:e.id,meta:e.meta,props:e.props}))}},subscribe:e=>(0,o.__subscribeWithSelector)((e=>e.globalClasses),e),labels:{singular:(0,i.__)("Global CSS Class","elementor"),plural:(0,i.__)("Global CSS Classes","elementor")}};(0,o.__registerSlice)(g),(0,r.__registerPanel)(h),a.stylesRepository.register(I),(0,e.injectIntoLogic)({id:"global-classes-hooks",component:function(){const e=(0,o.__useDispatch)();return(0,n.useEffect)((()=>{(async()=>(0,u.httpService)().get(V))().then((t=>{const{data:r,meta:a}=t.data;e(g.actions.init({items:r,order:a.order}))}))}),[e]),null}}),(0,t.injectIntoClassSelectorActions)({id:"global-classes",component:()=>{const{open:e}=b();return n.createElement(s.Tooltip,{title:(0,i.__)("Class manager"),placement:"top"},n.createElement(s.IconButton,{onClick:e},n.createElement(l.ColorSwatchIcon,{fontSize:"tiny"})))}}),(window.elementorV2=window.elementorV2||{}).editorGlobalClasses={}}();